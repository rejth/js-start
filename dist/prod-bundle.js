(()=>{"use strict";const e=function(e){var t=document.getElementById(e),n=document.createElement("div"),o=document.querySelector(".popup"),c=document.querySelectorAll("#".concat(e," input"));n.style.cssText="font-size: 2rem; color: white",t.addEventListener("input",(function(e){e.target.matches('input[name="user_phone"]')&&(e.target.setAttribute("pattern","^[0-9-+()]{11,16}$"),e.target.value=e.target.value.replace(/[^\d+()-]/g,""))})),t.addEventListener("input",(function(e){e.target.matches('input[name="user_email"]')&&(e.target.setAttribute("pattern","^[A-Za-z0-9._-]+@[A-Za-z]+.[A-Za-z]{2,3}$"),e.target.value=e.target.value.replace(/[^A-Za-z\d.@_-]/g,""))})),t.addEventListener("input",(function(e){e.target.matches('input[name="user_name"]')&&(e.target.setAttribute("pattern","[А-Яа-яЁё-]{2,}"),e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s-]|/g,""))})),t.addEventListener("input",(function(e){e.target.matches('input[name="user_message"]')&&(e.target.setAttribute("type","text"),e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s().,!?'";:-]/g,""))})),t.addEventListener("submit",(function(e){e.preventDefault(),t.append(n),n.textContent="Загрузка...";var r,a=new FormData(t),u={};a.forEach((function(e,t){return u[t]=e})),(r=u,fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).then((function(e){if(200!==e.status)throw new Error("Response status code is not 200");n.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(e){n.textContent="Что-то пошло не так...",console.error(e)})),c.forEach((function(e){return e.value=""})),setTimeout((function(){return n.remove()}),5e3),setTimeout((function(){return o.style.display="none"}),7e3)}))};var t,n,o,c,r,a,u,s,i,l;(function(e){var t,n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");function r(){var e,r,a,u=(e=(new Date("31 december 2020").getTime()-(new Date).getTime())/1e3,r=Math.floor(e%60),a=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/3600),minutes:a,seconds:r});u.timeRemaining<=0?(n.textContent="00",o.textContent="00",c.textContent="00",clearInterval(t)):(n.textContent=u.hours<10?"0"+u.hours:u.hours,o.textContent=u.minutes<10?"0"+u.minutes:u.minutes,c.textContent=u.seconds<10?"0"+u.seconds:u.seconds)}r(),t=setInterval(r,1e3)})(),l=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.classList.contains("close-btn")||t.matches("ul>li>a")?l.classList.toggle("active-menu"):t.closest(".active-menu")||l.classList.remove("active-menu")})),r=document.querySelectorAll(".popup-btn"),a=document.querySelector(".popup"),u=document.querySelector(".popup-content"),s=0,i=function(){s++,parseFloat(u.style.top)<20?u.style.top=s+"%":(clearInterval(c),s=0)},r.forEach((function(e){e.addEventListener("click",(function(){a.style.display="block",u.style.top="-200%",window.innerWidth>768?c=setInterval(i,15):u.style.top="20%"}))})),a.addEventListener("click",(function(e){var t=e.target;!t.classList.contains("popup-close")&&t.closest(".popup-content")||(a.style.display="none")})),t=document.querySelector(".service-header"),n=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab"),t.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&n.forEach((function(e,c){var r;e===t&&(r=c,o.forEach((function(e,t){t===r?(n[t].classList.add("active"),e.classList.remove("d-none")):(n[t].classList.remove("active"),e.classList.add("d-none"))})))}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots"),c=document.querySelectorAll(".dot"),r=0;t.forEach((function(e,t){var n=document.createElement("li");0===t?(n.classList.add("dot"),n.classList.add("dot-active")):n.classList.add("dot"),o.append(n)})),c=document.querySelectorAll(".dot");var a=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},s=function(){a(t,r,"portfolio-item-active"),a(c,r,"dot-active"),++r===t.length&&(r=0),u(t,r,"portfolio-item-active"),u(c,r,"dot-active")},i=function(){e=setInterval(s,2e3)};i(),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;(n.matches(".dot")||n.matches(".portfolio-btn"))&&(a(t,r,"portfolio-item-active"),a(c,r,"dot-active"),n.matches(".dot")?c.forEach((function(e,t){e===n&&(r=t)})):n.matches("#arrow-right")?r++:n.matches("#arrow-left")&&r--,r>=t.length?r=0:r<0&&(r=t.length-1),u(t,r,"portfolio-item-active"),u(c,r,"dot-active"))}))}(),document.querySelectorAll(".command img").forEach((function(e){var t=e.src;e.addEventListener("mouseenter",(function(){e.src=e.dataset.img})),e.addEventListener("mouseleave",(function(){e.src=t}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-total"),u=function(){document.querySelector(".calc").addEventListener("input",(function(e){e.target.matches("input")&&(e.target.value=e.target.value.replace(/[^\d]/g,""))}))};u();var s=function(){var t=0,u=1,s=1,i=+n.options[n.selectedIndex].value,l=+o.value,d=+c.value,m=+r.value;d>1&&(u+=(d-1)/10),m&&m<5?s*=2:m&&m>=5&&m<10&&(s*=1.5),n&&o&&(t=Math.floor(e*i*l*u*s)),a.textContent=t};t.addEventListener("change",(function(e){(e.target.matches("select")||e.target.matches("input"))&&s()}))}(100),e("form1"),e("form2"),e("form3")})();